name: Run WEB Test
run-name: On Push - WEB Test Run
on: [push]

jobs:
  WEB-Test:
    runs-on: ubuntu-latest
    steps:
        - name: Check out repository code
          uses: actions/checkout@v4
        
        - name: Install Python 3.10
          uses: actions/setup-python@v4
          with:
            python-version: '3.10'

        - name: Install Node.js 19.1
          uses: actions/setup-node@v3
          with:
            node-version:   '19.1' 
        
        - name: Istall Requirements
          run: |
            python -m pip install --upgrade pip
            pip install -U -r requirements.txt
            sudo npm install @playwright/test
            sudo npx playwright install-deps
            rfbrowser init

        - name: Run RF WEB Test
          run: |
            robot -d ./results -v HEADLESS:true \
            -v BROWSER:chromium tests
